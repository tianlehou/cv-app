<!-- image-grid.component.html -->
<div class="image-grid">
    <!-- Upload Button & Progress -->
    <div class="upload-container">
        <div *ngIf="uploadProgress === null; else progressTemplate" class="upload-button">
            <label for="image-upload">
                <i class="fas fa-plus"></i> Subir imagen
            </label>
            <input id="image-upload" type="file" accept="image/*" hidden 
                   (click)="$event.stopPropagation()" (change)="onFileSelected($event)">
        </div>
        <ng-template #progressTemplate>
            <div class="upload-progress">
                <div class="progress-bar" [ngStyle]="{ 'width': uploadProgress + '%' }">
                    {{ uploadProgress }}%
                </div>
                <div class="progress-size">
                    {{ uploadedSize | filesize }} de {{ totalSize | filesize }}
                </div>
            </div>
        </ng-template>
    </div>

    <!-- Images Grid -->
    <div *ngFor="let image of userImages" class="image-item">
        <img [src]="image" alt="User uploaded image">
        <button class="delete-button" (click)="deleteImage(image)">
            <i class="fas fa-trash"></i>
        </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-spinner">
        <i class="fas fa-spinner fa-spin"></i>
    </div>
</div>

<!-- Modal de confirmación -->
<app-delete-confirm-modal [isVisible]="isDeleteModalVisible" [title]="'Eliminar Imagen'"
    [message]="'¿Estás seguro de que deseas eliminar esta imagen?'" (confirm)="onDeleteConfirmed()"
    (cancel)="onDeleteCanceled()">
</app-delete-confirm-modal>